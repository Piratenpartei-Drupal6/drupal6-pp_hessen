var pp_hessen = {
	ksl: {
		offset: 1,
		title: "Kreis Kassel",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-kassel.de/content/kreistag-kasssel'>1 Pirat im Kreistag</a>",
			"<a href='http://www.piratenpartei-kassel.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	ks: {
		offset: 2,
		title: "Kassel",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-kassel.de/content/unsere-kandidaten-f%C3%BCr-die-stadtverordnetenversammlung'>2 Piraten in Kassel</a>",
			"<a href='http://www.piratenpartei-kassel.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	wmk: {
		offset: 3,
		title: "Werra-Meißner-Kreis",
		lines: [
			"viele Piraten",
			"<a href='https://wiki.piratenpartei.de/HE:Stammtische#Stammtisch_Werra-Mei.C3.9Fner-Kreis'>Stammtische</a>",
			"<a href='http://lists.piratenpartei-hessen.de/mailman/listinfo/werra-meissner-kreis'>Mit- und Neupiraten gesucht</a>",
		]
	},
	wfb: {
		offset: 4,
		title: "Kreis Waldeck-Frankenberg",
		lines: [
			"viele Piraten",
			"<a href='http://www.piraten-wa-fkb.de/abgeordnete.html'>1 Pirat im Kreistag</a>",
			"<a href='http://www.piraten-wa-fkb.de/abgeordnete.html'>1 Pirat in Frankenau</a>",
			"<a href='http://www.piraten-wa-fkb.de/mitmachen.html'>Mitmachen im Kreisverband</a>",
		]
	},
	sek: {
		offset: 5,
		title: "Schwalm-Eder-Kreis",
		lines: [
			"viele Piraten",
			"<a href='http://piraten-sek.de/forum'>Mitmachen im Kreisverband</a>",
		]
	},
	hr: {
		offset: 6,
		title: "Kreis Hersfeld-Rotenburg",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-hefrof.de/stammtisch'>Stammtisch</a>",
			"<a href='http://www.piratenpartei-hefrof.de/mitmachen'>Mit- und Neupiraten gesucht</a>",
		]
	},
	mr: {
		offset: 7,
		title: "Kreis Marburg-Biedenkopf",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-marburg.de/abgeordnete'>1 Pirat im Kreistag</a>",
			"<a href='http://www.piratenpartei-marburg.de/abgeordnete'>1 Pirat im Stadtparlament</a>",
			"<a href='http://www.piratenpartei-marburg.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	vb: {
		offset: 8,
		title: "Kreis Vogelsberg",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-vogelsberg.de/stammtische'>Stammtische</a>",
			"<a href='http://www.piratenpartei-vogelsberg.de/mitmachen'>Mit- und Neupiraten gesucht</a>",
		]
	},
	fd: {
		offset: 9,
		title: "Kreis Fulda",
		lines: [
			"viele Piraten",
			"<a href='http://www.piraten-fulda.de/content/stammtisch'>Stammtisch</a>",
			"<a href='http://www.piraten-fulda.de/content/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	ldk: {
		offset: 10,
		title: "Lahn-Dill-Kreis",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-lahn-dill.de/treffen'>Stammtisch</a>",
			"<a href='http://www.piratenpartei-lahn-dill.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	gi: {
		offset: 11,
		title: "Gießen",
		lines: [
			"viele Piraten",
			"<a href='http://www.piraten-giessen.de/kreistagsabgeordnete'>2 Piraten im Kreistag</a>",
			"<a href='http://www.piraten-giessen.de/stadtfraktion'>Stadtfraktion</a>",
			"<a href='http://www.piraten-giessen.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	fb: {
		offset: 12,
		title: "Kreis Wetterau",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-wetterau.de/content/wetteraukreis'>1 Pirat im Kreistag</a>",
			"<a href='http://www.piratenpartei-wetterau.de/content/rosbach-vdh'>1 Pirat in Rosbach v.d.H.</a>",
			"<a href='http://www.piratenpartei-wetterau.de/content/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	mkk: {
		offset: 13,
		title: "Main-Kinzig-Kreis",
		lines: [
			"viele Piraten",
			"<a href='http://www.kinzigpiraten.de/kreistag'>Kreistagsfraktion</a>",
			"<a href='http://www.kinzigpiraten.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	lw: {
		offset: 14,
		title: "Kreis Limburg-Weilburg",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-limburg-weilburg.de/content/die-mitmachpartei-regelm%C3%A4%C3%9Fige-treffen'>Stammtisch</a>",
			"<a href='http://www.piratenpartei-limburg-weilburg.de'>Mit- und Neupiraten gesucht</a>",
		]
	},
	htk: {
		offset: 15,
		title: "Hochtaunuskreis",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-hochtaunus.de/kreistag'>1 Pirat im Kreistag</a>",
			"<a href='http://www.piratenpartei-hochtaunus.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	ffm: {
		offset: 16,
		title: "Frankfurt am Main",
		lines: [
			"viele Piraten",
			"<a href='http://elf-piraten.de'>Fraktion ELF Piraten</a>",
			"<a href='http://www.piratenpartei-frankfurt.de/content/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	of: {
		offset: 17,
		title: "Offenbach am Main",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-offenbach.de/content/fraktion-2011-2016'>Stadtfraktion</a>",
			"<a href='http://www.piratenpartei-offenbach.de/content/piraten-treff-offenbach'>Stammtisch</a>",
			"<a href='http://lists.piratenpartei-hessen.de/mailman/listinfo/kreis-of'>Mit- und Neupiraten gesucht</a>",
		]
	},
	kof: {
		offset: 18,
		title: "Kreis Offenbach",
		lines: [
			"viele Piraten",
			"<a href='http://www.kreispiraten-of.de/content/fraktion-piraten-im-kreistag-offenbach-land'>Kreistagsfraktion</a>",
			"<a href='http://www.kreispiraten-of.de/content/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	rtk: {
		offset: 19,
		title: "Rheingau-Taunus-Kreis",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-rtk.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	wi: {
		offset: 20,
		title: "Wiesbaden",
		lines: [
			"viele Piraten",
			"<a href='http://linke-und-piraten-wiesbaden.de'>Fraktion LINKE&PIRATEN",
			"<a href='http://www.piratenpartei-wiesbaden.de/werdepirat.aspx'>Mitmachen im Kreisverband</a>",
		]
	},
	mtk: {
		offset: 21,
		title: "Main-Taunus-Kreis",
		lines: [
			"viele Piraten",
			"<a href='http://www.piraten-mtk.de'>Mitmachen im Kreisverband</a>",
		]
	},
	gg: {
		offset: 22,
		title: "Kreis Gross-Gerau",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-gross-gerau.de'>Mitmachen im Kreisverband</a>",
		]
	},
	da: {
		offset: 23,
		title: "Darmstadt",
		lines: [
			"viele Piraten",
			"Stadtfraktion",
			"<a href='http://www.piratenpartei-dadadi.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	dadi: {
		offset: 24,
		title: "Kreis Darmstadt-Dieburg",
		lines: [
			"viele Piraten",
			"Fraktion Freie Wähler - Piraten",
			"<a href='http://www.piratenpartei-dadadi.de/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	},
	bs: {
		offset: 25,
		title: "Kreis Bergstrasse",
		lines: [
			"viele Piraten",
			"<a href='http://www.piraten-fraktion-bergstrasse.de'>Kreistagsfraktion</a>",
			"<a href='http://www.piraten-bergstrasse.de'>Mitmachen im Kreisverband</a>",
		]
	},
	ow: {
		offset: 26,
		title: "Kreis Odenwald",
		lines: [
			"viele Piraten",
			"<a href='http://www.piratenpartei-odenwald.de/content/piraten-treffen'>Stammtisch</a>",
			"<a href='http://www.piratenpartei-odenwald.de/content/mitmachen'>Mitmachen im Kreisverband</a>",
		]
	}
};

var pp_hessen_clicked = "";

var pp_hessen_lv_count = "viele Piraten";

$(document).ready(function() {
	$.ajax({
		type: "GET",
		url: "/mitglieder.xml",
		dataType: "xml",
		cache: false,
		success: function(xml) {
			var count = $(xml).find('landesverband').attr("mitglieder");
			if (count > 0)
				pp_hessen_lv_count = pp_hessen_formatify(count, ".") + " Piraten";

			$.each(pp_hessen, function(idx, data) {
				var mitglieder = $(xml).find('region[jsid='+data.offset+']').attr('mitglieder');
				if (mitglieder > 0)
					pp_hessen[idx].lines[0] = pp_hessen_formatify(mitglieder, ".") + " Piraten";
			});

			pp_hessen_outHessen();
		},
		error: function (jqXHR, textStatus, errorThrown) {
			pp_hessen_outHessen();
		}
	});

	$("#pp_hessen_regionClose").hide();
	$("#pp_hessen_regionClose").click(function() {
		pp_hessen_clicked = "";
		pp_hessen_outHessen();
		$("#pp_hessen_regionClose").hide();
	});
});

function pp_hessen_formatify(val, char) {
	return String(val).split("").reverse().join("")
		.replace(/(.{3}\B)/g, "$1"+char)
		.split("").reverse().join("");
}

function pp_hessen_outHessen() {
	if (pp_hessen_clicked == "") {
		if (pp_hessen_default == 0) {
			$("#pp_hessen_regionTitle").html("Landesverband Hessen");
			$("#pp_hessen_regionLine1").html(pp_hessen_lv_count);
			$("#pp_hessen_regionLine2").html("<a href='http://www.piratenpartei-hessen.de/kreisverbaende'>17 Kreisverbände</a>");
			$("#pp_hessen_regionLine3").html("<a href='http://www.piratenpartei-hessen.de/kommunalpolitik'>32 Abgeordnete</a>");
			$("#pp_hessen_regionLine4").html("<a href='http://www.piratenpartei-hessen.de/mitmachen'>Mitmachen</a>");
			$("#pp_hessen_karteHessen").css('background-position', '0 0');
		} else {
			var region = pp_hessen_getRegion();
			pp_hessen_showTile(region);
		}
	} else {
		pp_hessen_clickHessen(pp_hessen_clicked);
	}
}

function pp_hessen_getRegion() {
	var region = "";
	$.each(pp_hessen, function(key, data) {
		if (pp_hessen_default == data.offset)
			region = key;
	});

	return region;
}

function pp_hessen_overHessen(region) {
	pp_hessen_showTile(region);
	if (region != pp_hessen_clicked)
		$("#pp_hessen_regionClose").hide();
}

function pp_hessen_clickHessen(region) {
	pp_hessen_clicked = region;
	pp_hessen_showTile(region);
	$("#pp_hessen_regionClose").show();
}

function pp_hessen_showTile(region) {
	$("#pp_hessen_regionTitle").html(pp_hessen[region].title ? pp_hessen[region].title : "&nbsp;");
	$("#pp_hessen_regionLine1").html(pp_hessen[region].lines[0] ? pp_hessen[region].lines[0] : "&nbsp;");
	$("#pp_hessen_regionLine2").html(pp_hessen[region].lines[1] ? pp_hessen[region].lines[1] : "&nbsp;");
	$("#pp_hessen_regionLine3").html(pp_hessen[region].lines[2] ? pp_hessen[region].lines[2] : "&nbsp;");
	$("#pp_hessen_regionLine4").html(pp_hessen[region].lines[3] ? pp_hessen[region].lines[3] : "&nbsp;");
	var pos = 229 * pp_hessen[region].offset;
	var css = "0 -"+pos+"px";
	$("#pp_hessen_karteHessen").css('background-position', css);
}
